<!DOCTYPE html>
<html>
<head>
<title> Edit Student Record</title>
<style>
     body {
            margin: 0;
            font-family: Arial;
        }

        .sidebar {
            width: 230px;
            height: 100vh;
            background:linear-gradient(to bottom, #004e92, #000428);
            position: fixed;
            color: white;
            padding-top: 10px;
        }
        .sidebar a {
             display: block;
            color: white;
            padding: 12px;
            font-size: 14px;
            margin: 2px;
            padding-top: 10px;
            margin-top: 5px;
            text-decoration: none;
            font-display: block;
        }

        .sidebar a:hover {
            background: #596e98 ;
        }


.main {
    margin-left: 220px;
    padding: 15px;
}
h2{
            text-align:center;
            font-size: 20px;
            margin-bottom: 30px;
            margin-top: 5px;
            padding: 5px;
        }

h1{
    margin-bottom:30px;
    color: #334155;
}


table{
    width:100%;
    border-collapse:collapse;
    background:white;
}
th, td{
    border:1px solid #ccc;
    padding:10px;
    text-align:center;
}
th{
    background:#1e293b;
    color:white;
}


.edit-btn{
    background:#2563eb;
    color:white;
    border:none;
    padding:6px 12px;
    cursor:pointer;
    border-radius:5px;
}
.edit-btn:hover{
    background:#1e40af;
}
.modal {
  display: none;
  position: fixed;
  top: 0%;
  left: 35%;
  background: white;
  padding: 0px;
  width: 420px;
  border-radius: 8px;
  box-shadow: 0 8px 25px rgba(0,0,0,0.3);
}
.modal-content{
    background:white;
    width:350px;
    margin:100px auto;
    padding: 10px;
    padding-top: 2px;
    border-radius:8px;
    margin-top: 0%;
}

.save{
    background:#16a34a;
    color:white;
    border:none;
    padding:10px;
    width:100%;
    margin-top: 12px;
  
}
.form-row {
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  width: 400px;
  margin-top: 2px;
  padding-top: 0%;
}

.form-row input {
  width: 70%;
  padding:0px;
  box-sizing: border-box;
  
}
.form-row label{
  font-weight: bold;
  padding-top: 13px;
}

</style>
</head>

<body>
     <div class="sidebar">
    <h2>University Management System</h2>
    <a href="/">Home</a>
    <a href="/students">Students Information</a>
    <a href="/marks">Marks</a>
    <a href="/edit">Edit Information</a>
    <a href="/courses">Courses Details</a> 
    <a href="/gpa">GPA Report</a>
    <a href="/about">About</a>
    
    
    
</div>

<div class="main">
     <h1 style="margin-left: 30%; padding-top: 0%;">Students Record</h1>

<table id="studentTable">
<thead>
<tr>
    <th>Roll No</th>
    <th>Name</th>
    <th>Course</th>
    <th>Section</th>
    <th>Calculus</th>
    <th>Physics</th>
    <th>DM</th>
    <th>AICT</th>
    <th>PF</th>
    <th>Edit</th>
</tr>
</thead>
<tbody>


</tbody>
</table>

<!-- MODAL -->
<div class="modal" id="modal">
<div class="modal-content">
<h3 style="margin-top: 0%; font-size: 22px;margin-left: 15%;">Edit Student Record</h3>
<div class="form-row">
<label for="studentmame">Name</label>
<input id="studentname" placeholder="Name">
<label for="course">Course</label>
<input id="course" placeholder="Course">
<label for="section">Section</label>
<input id="section" placeholder="Section">
<label for="calculus">Calculus</label>
<input id="calculus" placeholder="Calculus Marks">
<label for="physics">Physics</label>
<input id="physics" placeholder="Physics Marks">
<label for="dm">CS</label>
<input id="dm" placeholder="Discrete Math Marks">
<label for="aict">Aict</label>
<input id="aict" placeholder="Application of Information and communication technology">
<label for="pf">PF</label>
<input id="pf" placeholder="Programming Fundamentals">
</div>
<button class="save" onclick="save()">Save</button>
</div>
</div>

<script>
let selectedRow;

function editRow(btn){
    selectedRow = btn.parentElement.parentElement;
    let cells = selectedRow.children;

    studentname.value = cells[1].innerText;
    course.value = cells[2].innerText;
    section.value = cells[3].innerText;
    calculus.value = cells[4].innerText;
    physics.value = cells[5].innerText;
    dm.value = cells[6].innerText;
    aict.value = cells[7].innerText;
    pf.value = cells[7].innerText;

    modal.style.display = "block";
}

function save(){
    let cells = selectedRow.children;

    cells[1].innerText = studentname.value;
    cells[2].innerText = course.value;
    cells[3].innerText = section.value;
    cells[4].innerText = calculus.value;
    cells[5].innerText = physics.value;
    cells[6].innerText = dm.value;
    cells[7].innerText = aict.value;
    cells[8].innerText = pf.value;

    modal.style.display = "none";
}

function loadEditTable() {
    fetch("/edit-data")
        .then(res => res.json())
        .then(data => {
            let tbody = document.querySelector("#studentTable tbody");
            tbody.innerHTML = "";

            data.forEach(s => {
                tbody.innerHTML += `
                <tr>
                    <td>${s.roll}</td>
                    <td>${s.name}</td>
                    <td>${s.course}</td>
                    <td>${s.section}</td>
                    <td>${s.calculus}</td>
                    <td>${s.physics}</td>
                    <td>${s.dm}</td>
                    <td>${s.aict}</td>
                    <td>${s.pf}</td>
                    <td><button class="edit-btn" onclick="editRow(this)">Edit</button></td>
                </tr>`;
            });
        });
}

loadEditTable();
</script>

</div>
</body>
</html>
